<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Building blocks | Sen2Cube.at Manual</title>
  <meta name="description" content="5 Building blocks | Sen2Cube.at Manual" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Building blocks | Sen2Cube.at Manual" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="whisperingpixel/iq-manual" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Building blocks | Sen2Cube.at Manual" />
  
  
  



<meta name="date" content="2021-05-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="model.html"/>
<link rel="next" href="examples.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Sen2Cube.at Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#overview"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#use-cases"><i class="fa fa-check"></i><b>1.2</b> Use cases</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#semantic-content-based-image-retrieval"><i class="fa fa-check"></i><b>1.2.1</b> Semantic content-based image retrieval</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#cloud-free-composite"><i class="fa fa-check"></i><b>1.2.2</b> Cloud-free composite</a></li>
<li class="chapter" data-level="1.2.3" data-path="index.html"><a href="index.html#time-series"><i class="fa fa-check"></i><b>1.2.3</b> Time series</a></li>
<li class="chapter" data-level="1.2.4" data-path="index.html"><a href="index.html#spatially-disaggregated-information"><i class="fa fa-check"></i><b>1.2.4</b> Spatially disaggregated information</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#next-steps-and-how-to-start"><i class="fa fa-check"></i><b>1.3</b> Next steps and how to start</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#more-information-and-community-access"><i class="fa fa-check"></i><b>1.4</b> More information and community access</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="enrichment.html"><a href="enrichment.html"><i class="fa fa-check"></i><b>2</b> Semantic Enrichment</a><ul>
<li class="chapter" data-level="2.1" data-path="enrichment.html"><a href="enrichment.html#siam"><i class="fa fa-check"></i><b>2.1</b> Satellite Image Automatic Mapper (SIAM)</a><ul>
<li class="chapter" data-level="2.1.1" data-path="enrichment.html"><a href="enrichment.html#siam_examples_austria"><i class="fa fa-check"></i><b>2.1.1</b> Applied in Austria</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="start.html"><a href="start.html"><i class="fa fa-check"></i><b>3</b> Getting started</a><ul>
<li class="chapter" data-level="3.1" data-path="start.html"><a href="start.html#components"><i class="fa fa-check"></i><b>3.1</b> Components</a></li>
<li class="chapter" data-level="3.2" data-path="start.html"><a href="start.html#workflow"><i class="fa fa-check"></i><b>3.2</b> Workflow</a><ul>
<li class="chapter" data-level="3.2.1" data-path="start.html"><a href="start.html#selecting-the-model"><i class="fa fa-check"></i><b>3.2.1</b> Selecting the model</a></li>
<li class="chapter" data-level="3.2.2" data-path="start.html"><a href="start.html#selecting-the-area-of-interest"><i class="fa fa-check"></i><b>3.2.2</b> Selecting the area-of-interest</a></li>
<li class="chapter" data-level="3.2.3" data-path="start.html"><a href="start.html#selecting-the-time-interval"><i class="fa fa-check"></i><b>3.2.3</b> Selecting the time interval</a></li>
<li class="chapter" data-level="3.2.4" data-path="start.html"><a href="start.html#executing-the-query-and-inferring-new-information"><i class="fa fa-check"></i><b>3.2.4</b> Executing the query and inferring new information</a></li>
<li class="chapter" data-level="3.2.5" data-path="start.html"><a href="start.html#preview-mode"><i class="fa fa-check"></i><b>3.2.5</b> Preview-mode</a></li>
<li class="chapter" data-level="3.2.6" data-path="start.html"><a href="start.html#viewing-and-downloading-the-results"><i class="fa fa-check"></i><b>3.2.6</b> Viewing and downloading the results</a></li>
<li class="chapter" data-level="3.2.7" data-path="start.html"><a href="start.html#error-handling"><i class="fa fa-check"></i><b>3.2.7</b> Error handling</a></li>
<li class="chapter" data-level="3.2.8" data-path="start.html"><a href="start.html#exampleworkflow"><i class="fa fa-check"></i><b>3.2.8</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="start.html"><a href="start.html#other-access-options"><i class="fa fa-check"></i><b>3.3</b> Other access options</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="model.html"><a href="model.html"><i class="fa fa-check"></i><b>4</b> Model structure</a></li>
<li class="chapter" data-level="5" data-path="blocks.html"><a href="blocks.html"><i class="fa fa-check"></i><b>5</b> Building blocks</a><ul>
<li class="chapter" data-level="5.1" data-path="blocks.html"><a href="blocks.html#definitions"><i class="fa fa-check"></i><b>5.1</b> Definitions</a><ul>
<li class="chapter" data-level="5.1.1" data-path="blocks.html"><a href="blocks.html#entities-and-properties"><i class="fa fa-check"></i><b>5.1.1</b> Entities and properties</a></li>
<li class="chapter" data-level="5.1.2" data-path="blocks.html"><a href="blocks.html#result_definition"><i class="fa fa-check"></i><b>5.1.2</b> Results</a></li>
<li class="chapter" data-level="5.1.3" data-path="blocks.html"><a href="blocks.html#seasons-and-partitions"><i class="fa fa-check"></i><b>5.1.3</b> Seasons and partitions</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="blocks.html"><a href="blocks.html#data-and-information"><i class="fa fa-check"></i><b>5.2</b> Data and information</a><ul>
<li class="chapter" data-level="5.2.1" data-path="blocks.html"><a href="blocks.html#appearance"><i class="fa fa-check"></i><b>5.2.1</b> Appearance</a></li>
<li class="chapter" data-level="5.2.2" data-path="blocks.html"><a href="blocks.html#atmosphere"><i class="fa fa-check"></i><b>5.2.2</b> Atmosphere</a></li>
<li class="chapter" data-level="5.2.3" data-path="blocks.html"><a href="blocks.html#reflectance"><i class="fa fa-check"></i><b>5.2.3</b> Reflectance</a></li>
<li class="chapter" data-level="5.2.4" data-path="blocks.html"><a href="blocks.html#topography"><i class="fa fa-check"></i><b>5.2.4</b> Topography</a></li>
<li class="chapter" data-level="5.2.5" data-path="blocks.html"><a href="blocks.html#artifacts"><i class="fa fa-check"></i><b>5.2.5</b> Artifacts</a></li>
<li class="chapter" data-level="5.2.6" data-path="blocks.html"><a href="blocks.html#metadata"><i class="fa fa-check"></i><b>5.2.6</b> Metadata</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="blocks.html"><a href="blocks.html#verbs"><i class="fa fa-check"></i><b>5.3</b> Verbs</a><ul>
<li class="chapter" data-level="5.3.1" data-path="blocks.html"><a href="blocks.html#evaluate"><i class="fa fa-check"></i><b>5.3.1</b> Evaluate</a></li>
<li class="chapter" data-level="5.3.2" data-path="blocks.html"><a href="blocks.html#filter"><i class="fa fa-check"></i><b>5.3.2</b> Filter</a></li>
<li class="chapter" data-level="5.3.3" data-path="blocks.html"><a href="blocks.html#group-by-and-ungroup"><i class="fa fa-check"></i><b>5.3.3</b> Group by and ungroup</a></li>
<li class="chapter" data-level="5.3.4" data-path="blocks.html"><a href="blocks.html#invert"><i class="fa fa-check"></i><b>5.3.4</b> Invert</a></li>
<li class="chapter" data-level="5.3.5" data-path="blocks.html"><a href="blocks.html#label"><i class="fa fa-check"></i><b>5.3.5</b> Label</a></li>
<li class="chapter" data-level="5.3.6" data-path="blocks.html"><a href="blocks.html#mask"><i class="fa fa-check"></i><b>5.3.6</b> Mask</a></li>
<li class="chapter" data-level="5.3.7" data-path="blocks.html"><a href="blocks.html#reduce"><i class="fa fa-check"></i><b>5.3.7</b> Reduce</a></li>
<li class="chapter" data-level="5.3.8" data-path="blocks.html"><a href="blocks.html#replace"><i class="fa fa-check"></i><b>5.3.8</b> Replace</a></li>
<li class="chapter" data-level="5.3.9" data-path="blocks.html"><a href="blocks.html#select"><i class="fa fa-check"></i><b>5.3.9</b> Select</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="blocks.html"><a href="blocks.html#combiners"><i class="fa fa-check"></i><b>5.4</b> Combiners</a><ul>
<li class="chapter" data-level="5.4.1" data-path="blocks.html"><a href="blocks.html#concatenate"><i class="fa fa-check"></i><b>5.4.1</b> Concatenate</a></li>
<li class="chapter" data-level="5.4.2" data-path="blocks.html"><a href="blocks.html#compose"><i class="fa fa-check"></i><b>5.4.2</b> Compose</a></li>
<li class="chapter" data-level="5.4.3" data-path="blocks.html"><a href="blocks.html#combine"><i class="fa fa-check"></i><b>5.4.3</b> Merge</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="blocks.html"><a href="blocks.html#time"><i class="fa fa-check"></i><b>5.5</b> Time</a><ul>
<li class="chapter" data-level="5.5.1" data-path="blocks.html"><a href="blocks.html#time_instant"><i class="fa fa-check"></i><b>5.5.1</b> Time instant</a></li>
<li class="chapter" data-level="5.5.2" data-path="blocks.html"><a href="blocks.html#time_period"><i class="fa fa-check"></i><b>5.5.2</b> Time periods</a></li>
<li class="chapter" data-level="5.5.3" data-path="blocks.html"><a href="blocks.html#time_collection"><i class="fa fa-check"></i><b>5.5.3</b> Time collection</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="blocks.html"><a href="blocks.html#space"><i class="fa fa-check"></i><b>5.6</b> Space</a></li>
<li class="chapter" data-level="5.7" data-path="blocks.html"><a href="blocks.html#comment"><i class="fa fa-check"></i><b>5.7</b> Comments</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="examples.html"><a href="examples.html"><i class="fa fa-check"></i><b>6</b> Examples</a></li>
<li class="chapter" data-level="7" data-path="error-codes.html"><a href="error-codes.html"><i class="fa fa-check"></i><b>7</b> Error codes</a><ul>
<li class="chapter" data-level="7.1" data-path="error-codes.html"><a href="error-codes.html#general-frontend-errors"><i class="fa fa-check"></i><b>7.1</b> General frontend errors</a><ul>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2101"><i class="fa fa-check"></i>2101 Unknown general system error</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2102"><i class="fa fa-check"></i>2102 General error during loading of data</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2103"><i class="fa fa-check"></i>2103 General error during storing of data</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2014"><i class="fa fa-check"></i>2014 Map is undefined</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="error-codes.html"><a href="error-codes.html#network-errors"><i class="fa fa-check"></i><b>7.2</b> Network errors</a><ul>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2201"><i class="fa fa-check"></i>2201 Unknown general network error</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2202"><i class="fa fa-check"></i>2202 Cannot load data because of unknown network error</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2203"><i class="fa fa-check"></i>2203 Cannot save data because of unknown network error</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2204"><i class="fa fa-check"></i>2204 Cannot load data because requested URL was not found</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2205"><i class="fa fa-check"></i>2205 Cannot load data because of an internal server error</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2206"><i class="fa fa-check"></i>2206 No serialiser found</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2207"><i class="fa fa-check"></i>2207 Error during serialisation</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2208"><i class="fa fa-check"></i>2208 Syntax error during serialisation</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2220"><i class="fa fa-check"></i>2220 Model can not be loaded because blocks are not accessible or empty</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2221"><i class="fa fa-check"></i>2221 The basemaps associated with the factbase cannot be loaded</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2222"><i class="fa fa-check"></i>2222 Retrieving blocks for a model failed</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="error-codes.html"><a href="error-codes.html#user-input-settings-and-session"><i class="fa fa-check"></i><b>7.3</b> User input, settings and session</a><ul>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2301"><i class="fa fa-check"></i>2301 Unknown error</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2302"><i class="fa fa-check"></i>2302 No input received</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2303"><i class="fa fa-check"></i>2303 Invald input</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2304"><i class="fa fa-check"></i>2304 No factbase selected</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2305"><i class="fa fa-check"></i>2305 At least one setting for a semantic query is missing</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2306"><i class="fa fa-check"></i>2306 The submitted area-of-interest has an invalid EPSG code</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2307"><i class="fa fa-check"></i>2307 The submitted area-of-interest has an invalid format or type</a></li>
<li class="chapter" data-level="7.3.1" data-path="error-codes.html"><a href="error-codes.html#the-submitted-area-of-interest-contains-geometries-with-invalid-coordinate-ranges-2308"><i class="fa fa-check"></i><b>7.3.1</b> 2308 The submitted area-of-interest contains geometries with invalid coordinate ranges {2308}</a></li>
<li class="chapter" data-level="7.3.2" data-path="error-codes.html"><a href="error-codes.html#unkonw-error-during-logging-in-2370"><i class="fa fa-check"></i><b>7.3.2</b> 2370 Unkonw error during logging in {2370}</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2371"><i class="fa fa-check"></i>2371 Unkonw error during logging out</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2372"><i class="fa fa-check"></i>2372 The current session is no longer authenticated</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2373"><i class="fa fa-check"></i>2373 User has not accepted usage conditions</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="error-codes.html"><a href="error-codes.html#semantic-querying-and-model-editing"><i class="fa fa-check"></i><b>7.4</b> Semantic querying and model editing</a><ul>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2401"><i class="fa fa-check"></i>2401 Unknown error</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2402"><i class="fa fa-check"></i>2402 The Blockly workspace is undefined</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2403"><i class="fa fa-check"></i>2403 The model is undefined</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2405"><i class="fa fa-check"></i>2405 No target field for block</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2406"><i class="fa fa-check"></i>2406 Dropdown menu of a block can not be generated</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2407"><i class="fa fa-check"></i>2407 Unknown block in a model</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="error-codes.html"><a href="error-codes.html#result-retrieval-and-visualisation"><i class="fa fa-check"></i><b>7.5</b> Result retrieval and visualisation</a><ul>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2501"><i class="fa fa-check"></i>2501 Unknown error during retrieval of a result</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2502"><i class="fa fa-check"></i>2502 Result cannot be visualised because it is empty</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2503"><i class="fa fa-check"></i>2503 A result map has an invalid EPSG code</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2504"><i class="fa fa-check"></i>2504 A result can not be loaded because of an invalid URL</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:2505"><i class="fa fa-check"></i>2505 A SCBIR result is not linked to an image</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="error-codes.html"><a href="error-codes.html#errors-associated-with-the-preparation-phase-of-semantic-queries"><i class="fa fa-check"></i><b>7.6</b> Errors associated with the preparation phase of semantic queries</a><ul>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:4101"><i class="fa fa-check"></i>4101 Invalid area-of-interest or time period</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:4102"><i class="fa fa-check"></i>4102 Invalid start date</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:4103"><i class="fa fa-check"></i>4103 Invalid end date</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="error-codes.html"><a href="error-codes.html#runtime-errors-of-semantic-queries"><i class="fa fa-check"></i><b>7.7</b> Runtime errors of semantic queries</a><ul>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:4201"><i class="fa fa-check"></i>4201 Inferences are stopped because of user request</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:4203"><i class="fa fa-check"></i>4203 Inferences are stopped because of user timeout</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:4204"><i class="fa fa-check"></i>4204 Inferences are stopped because of global timeout</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="error-codes.html"><a href="error-codes.html#errors-associated-with-the-status-of-a-factbase"><i class="fa fa-check"></i><b>7.8</b> Errors associated with the status of a factbase</a><ul>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:4301"><i class="fa fa-check"></i>4301 Unknown factbase status</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:4302"><i class="fa fa-check"></i>4302 Factbase is in maintenance status</a></li>
<li class="chapter" data-level="" data-path="error-codes.html"><a href="error-codes.html#ERROR:4303"><i class="fa fa-check"></i>4303 Factbase is in disabled status</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="contact.html"><a href="contact.html"><i class="fa fa-check"></i><b>8</b> Contact</a></li>
<li class="chapter" data-level="9" data-path="legal.html"><a href="legal.html"><i class="fa fa-check"></i><b>9</b> Legal Info</a><ul>
<li class="chapter" data-level="9.1" data-path="legal.html"><a href="legal.html#proprietary-rights-acknowledgment"><i class="fa fa-check"></i><b>9.1</b> Proprietary Rights Acknowledgment</a></li>
<li class="chapter" data-level="9.2" data-path="legal.html"><a href="legal.html#trademarks"><i class="fa fa-check"></i><b>9.2</b> Trademarks</a></li>
<li class="chapter" data-level="9.3" data-path="legal.html"><a href="legal.html#licences"><i class="fa fa-check"></i><b>9.3</b> Licences</a></li>
<li class="chapter" data-level="9.4" data-path="legal.html"><a href="legal.html#liability"><i class="fa fa-check"></i><b>9.4</b> Liability</a></li>
<li class="chapter" data-level="9.5" data-path="legal.html"><a href="legal.html#information-duty-to-gpdr-art.-13-and-14"><i class="fa fa-check"></i><b>9.5</b> Information Duty to GPDR Art. 13 and 14</a><ul>
<li class="chapter" data-level="9.5.1" data-path="legal.html"><a href="legal.html#general"><i class="fa fa-check"></i><b>9.5.1</b> General</a></li>
<li class="chapter" data-level="9.5.2" data-path="legal.html"><a href="legal.html#legal-basis-for-processing-person-related-data"><i class="fa fa-check"></i><b>9.5.2</b> Legal basis for processing person-related data</a></li>
<li class="chapter" data-level="9.5.3" data-path="legal.html"><a href="legal.html#processing-of-data-data-categories-and-involved-groups-of-persons"><i class="fa fa-check"></i><b>9.5.3</b> Processing of data, data categories and involved groups of persons</a></li>
<li class="chapter" data-level="9.5.4" data-path="legal.html"><a href="legal.html#use-of-your-personal-data-purpose"><i class="fa fa-check"></i><b>9.5.4</b> Use of your personal data (purpose)</a></li>
<li class="chapter" data-level="9.5.5" data-path="legal.html"><a href="legal.html#your-rights-as-an-involved-person"><i class="fa fa-check"></i><b>9.5.5</b> Your rights as an involved person</a></li>
<li class="chapter" data-level="9.5.6" data-path="legal.html"><a href="legal.html#revoking-consent"><i class="fa fa-check"></i><b>9.5.6</b> Revoking consent</a></li>
<li class="chapter" data-level="9.5.7" data-path="legal.html"><a href="legal.html#deletion-of-person-related-data"><i class="fa fa-check"></i><b>9.5.7</b> Deletion of person-related data</a></li>
<li class="chapter" data-level="9.5.8" data-path="legal.html"><a href="legal.html#technical-organisational-measures"><i class="fa fa-check"></i><b>9.5.8</b> Technical organisational measures</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="legal.html"><a href="legal.html#additional-legal-info-in-german-only"><i class="fa fa-check"></i><b>9.6</b> Additional legal info (in German only)</a><ul>
<li class="chapter" data-level="9.6.1" data-path="legal.html"><a href="legal.html#offenlegung-gemäß-25-mediengesetz"><i class="fa fa-check"></i><b>9.6.1</b> Offenlegung gemäß § 25 Mediengesetz</a></li>
<li class="chapter" data-level="9.6.2" data-path="legal.html"><a href="legal.html#urheberrechte"><i class="fa fa-check"></i><b>9.6.2</b> Urheberrechte</a></li>
<li class="chapter" data-level="9.6.3" data-path="legal.html"><a href="legal.html#markenrechte"><i class="fa fa-check"></i><b>9.6.3</b> Markenrechte</a></li>
<li class="chapter" data-level="9.6.4" data-path="legal.html"><a href="legal.html#haftung-und-gewährleistung"><i class="fa fa-check"></i><b>9.6.4</b> Haftung und Gewährleistung</a></li>
<li class="chapter" data-level="9.6.5" data-path="legal.html"><a href="legal.html#aufsichtsbehörde-der-universität-salzburg"><i class="fa fa-check"></i><b>9.6.5</b> Aufsichtsbehörde der Universität Salzburg</a></li>
<li class="chapter" data-level="9.6.6" data-path="legal.html"><a href="legal.html#aufgaben-der-paris-lodron-universität-salzburg"><i class="fa fa-check"></i><b>9.6.6</b> Aufgaben der Paris-Lodron-Universität Salzburg</a></li>
<li class="chapter" data-level="9.6.7" data-path="legal.html"><a href="legal.html#umsatzsteuer-identifikationsnummer-uid-der-universität-salzburg"><i class="fa fa-check"></i><b>9.6.7</b> Umsatzsteuer-Identifikationsnummer (UID) der Universität Salzburg</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Sen2Cube.at Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="blocks" class="section level1">
<h1><span class="header-section-number">5</span> Building blocks</h1>
<p>Models are constructed by connecting several <em>building blocks</em>, where each block represents a distinct, clearly defined task or value. There are different classes of blocks, which are described in detail below.</p>
<div id="definitions" class="section level2">
<h2><span class="header-section-number">5.1</span> Definitions</h2>
<p>Definition blocks store the output of a collection of other blocks, such that it can be accessed anywhere else in the model. Several types of definitions exist.</p>
<div class="rmdcaution">
<p>
All definitions must be named. Bear in mind that these names should be unique!
</p>
</div>
<div id="entities-and-properties" class="section level3">
<h3><span class="header-section-number">5.1.1</span> Entities and properties</h3>
<div id="entity_definition" class="section level4">
<h4><span class="header-section-number">5.1.1.1</span> Entities</h4>
<p>An entity is an identifiable phenomenon of interest in the real world that is not further subdivided into phenomena of the same kind. For example, <em>a lake</em> or <em>a field</em>. The Sen2Cube.at system allows to refer to entities at different semantic levels, including <em>water</em> or <em>vegetation</em>. The capability of eventually selecting entities on a higher or lower semantic level depends on the capabilities of the Earth observation sensor, noise during the observation, and the model construction. Entity definitions describe for each observation if it is identified as being part of this type of entity or not in the spatio-temporal extent of the semantic query. For example, when we define the entity <em>water</em>, the entity definition will store a set of boolean observations having a value of <code>True</code> when it was identified as being water, and <code>False</code> otherwise. These observations are aligned along two spatial dimensions, i.e. the X and Y coordinates of the observations geographical locations, and one temporal dimension, i.e. the timestamps at which the observations were made. Therefore, we call this data structure a <em>cube</em>. See the illustration below, where blue blocks represent observations that were identified as water, and grey blocks represent observations that were not identified as water.</p>
<center>
<p><img src="img/entitycube.png" style="width:50.0%" /></p>
</center>
<div class="rmdnote">
<p>
The observations will be associated to an entity type, not an individual entity. This means that observations might be associated with an entity type <em>water</em>, but not to groups of observations that may constitute different water bodies.
</p>
</div>
</div>
<div id="property_definition" class="section level4">
<h4><span class="header-section-number">5.1.1.2</span> Properties</h4>
<p>Entities are always defined by means of one or more <strong>properties</strong>. For example, a property of water may be its blueish color, but for larger water bodies also its approximate flatness (i.e. a slope of approximately 0%). An entity definition block thus <em>must</em> be followed by one or more property definition blocks. Properties must not be mutually exclusive and should not overlap, i.e., multiple properties will be always connected with <em>AND</em>. Consider a real-world entity lake where three properties <em>color</em>, <em>texture</em>, and <em>compactness</em>: They might be fuzzy or optional, but they are not either-or. I.e., a lake may appear blue as property color <em>AND</em> appear flat as property texture, but is not blue <em>OR</em> flat. There might be situations where one thinks of either-or options in some cases but this is an indicator that the property is not defined appropriately and should be solved differently.</p>
<p>Entity definition blocks - and their corresponding property definition blocks - are exclusively used inside the <strong>semantic concept dictionary</strong> component of the model. In the application component, stored entity definitions can be retrieved, wrangled, and exported.</p>
</div>
</div>
<div id="result_definition" class="section level3">
<h3><span class="header-section-number">5.1.2</span> Results</h3>
<p>A result is the output of an inference, while one inference may have more than one results of different types. Depending on the processes that are used in the semantic query, results can be single values, one-dimensional arrays or multi-dimensional cubes. Result definition blocks are exclusively used inside the <strong>application</strong> component of the model. Stored result definitions can be retrieved at any place within other result definitions inside the same model. <em>Not</em> every result definition needs to be exported. That is, a result definition can also be used as a preliminary output that serves as intermediate step towards the final output of the semantic query.</p>
</div>
<div id="seasons-and-partitions" class="section level3">
<h3><span class="header-section-number">5.1.3</span> Seasons and partitions</h3>
<div id="season_definition" class="section level4">
<h4><span class="header-section-number">5.1.3.1</span> Seasons</h4>
<p>When performing analyses over time, splitting the temporal dimension is a common task. For example, instead of the <em>overall water count</em>, we are interested to know the <em>average water count per season</em>, or the <em>ratio of summer water counts and winter water counts</em>. Seasons that typically appear on temperate latitudes like <em>summer</em> and <em>winter</em> are specified. In Sen2Cube.at, there is the option for different definitions of <strong>seasons</strong>. For example:</p>
<ul>
<li>The harvesting season as the time period from August to October.</li>
<li>The sowing season as the time period from March to May.</li>
<li>The rain season as the time period from December to May.</li>
<li>The dry season as the time period from August to November.</li>
</ul>
</div>
<div id="partition_definition" class="section level4">
<h4><span class="header-section-number">5.1.3.2</span> Partitions</h4>
<p>Distinct, but related seasons can then be combined into a <strong>partition</strong> of the temporal dimension. Just like summer, autumn, winter and spring together form the <em>meteorological seasons</em>, the defined harvesting and sowing seasons can together form the <em>agricultural seasons</em>, and the rain and dry season the <em>tropical seasons</em>. As can be seen, the custom defined partition does not have to fill up a full year. You are free to define any desired partition, as long as the included seasons span distinct time ranges.</p>
<p>Season and partition definition blocks are considered semantic concepts, and are therefore exclusively used inside the <strong>semantic concept dictionary</strong> component of the model. Unlike entities and results, the seasons and partition definitions are <em>not</em> evaluated at the moment they are defined. The temporal dimension of a cube is only split at the moment a specific season or partition is referenced inside the application component of the model.</p>
</div>
</div>
</div>
<div id="data-and-information" class="section level2">
<h2><span class="header-section-number">5.2</span> Data and information</h2>
<p>These blocks specify the access of the data and information in the factbase, e.g. reflectance values of satellite imagery or semantically enriched information. This is important for defining entities, but also, for example, for creating cloud-free mosaics. We separate the available data into the types <strong>appearance</strong>, <strong>atmosphere</strong>, <strong>reflectance</strong>, additional data sources such as <strong>topography</strong>, and <strong>artifacts</strong>. Further, some <strong>metadata</strong> from the Earth observation data can be accessed.</p>
<div id="appearance" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Appearance</h3>
<p>The <em>appearance</em> block refers to information about how an Earth observation measurement of the Earth’s surface looks based on an interpretation of what it represents. This can be calculated indices (e.g. multi-spectral greenness indices, multi-spectral brightness values) or categories (e.g. multi-spectral color spaces/categories) with some level of semantic association. In the case of the Sen2Cube.at project, SIAM semantic enrichment generates color types with low-level semantic association that are accessible using these blocks. This block is mainly used in the Sen2Cube.at system and relates to all land cover and land use questions.</p>
</div>
<div id="atmosphere" class="section level3">
<h3><span class="header-section-number">5.2.2</span> Atmosphere</h3>
<p>The <em>atmosphere</em> block refers to all interpretations of measurements or additional information associated with atmospheric phenomena or influences of an image (i.e., not the Earth’s surface). This includes estimates of haze, cloud cover, fog, airborne particulates, etc. that inhibit Earth surface applications, or are of specific interest to atmospheric applications. For example, clouds may be treated as noise in most applications related to land cover, however, might be specifically selected to query for cloud-free images.</p>
</div>
<div id="reflectance" class="section level3">
<h3><span class="header-section-number">5.2.3</span> Reflectance</h3>
<p>The <em>reflectance</em> block refers to calibrated reflectance values (e.g. top-of-atmosphere, bottom-of-atmosphere) of the Earth observations. The reflectance values can be directly accessed using this data block on an individual band basis for a given sensor (i.e. calibrated pixel values in each captured band for a given sensor/platform). An example application of this value is to create a cloud-free composite or retrieving the most recent image with less than 10% clouds.</p>
</div>
<div id="topography" class="section level3">
<h3><span class="header-section-number">5.2.4</span> Topography</h3>
<p>The <em>topography</em> block refers to any data or information related to the Earth’s topography (e.g. digital elevation models with derived aspect and slope). Example applications might be to to separate observations that appear as water or shadow in mountainous areas or to stratify vegetation phenology.</p>
<div class="rmdwarning">
<p>
Accessing these data is not yet supported and will be available soon.
</p>
</div>
</div>
<div id="artifacts" class="section level3">
<h3><span class="header-section-number">5.2.5</span> Artifacts</h3>
<p>The <em>artifacts</em> block includes all measurements or interpretations of measurements that may be associated with some errors or noise of invalid measurements (i.e., clouds don’t fall in this category). An example application of this block is to create quality layers with perceived or detected measurement errors or to investigate effects of differences in quality across an image or edges of acquisition swaths.</p>
</div>
<div id="metadata" class="section level3">
<h3><span class="header-section-number">5.2.6</span> Metadata</h3>
<p>The <em>metadata</em> block includes descriptive and technical metadata of the original satellite images. An example application is to identify the timestamps from individual pixels that contributed to the cloud-free composite if a best-available-pixel approach is is used.</p>
<div class="rmdcaution">
<p>
Currently, timestamps are the only supported metadata return value.
</p>
</div>
</div>
</div>
<div id="verbs" class="section level2">
<h2><span class="header-section-number">5.3</span> Verbs</h2>
<p>The core processing blocks are called <em>verbs</em>. Each verb represents a specific <em>action</em> that can be applied to a data cube. The verb blocks are therefore labelled with a single action word (i.e. a <em>verb</em>) that describes what the process is doing.</p>
<p>Such an action is always applied to a specific cube, like a stored entity or result definition, or some retrieved source data. In terms of blocks, this is modelled by a <em>with-do</em> structure, where a cube is referenced in the <em>with</em> part, and the action to be applied to it in the <em>do</em> part. For example, a single reduction over time applied to our defined <em>water</em> entity cube will look like this:</p>
<center>
<p><img src="img/withdosingle.png" style="width:50.0%" /></p>
</center>
<p>Often, it is desired to apply more than one action to the same cube. This is possible by providing a <em>chain of verbs</em>, where the output of the first process forms the input for the second process, et cetera. For example, start with the water entity cube, invert the <code>True</code> and <code>False</code> values, then keep only the <code>True</code> values, and then reduce that filtered cube over time. Hence, the processing chain is arranged in the logical order of how you also think about the task.</p>
<center>
<p><img src="img/withdochain.png" style="width:50.0%" /></p>
</center>
<p>Each <em>verb</em> block is described in more detail below.</p>
<div id="evaluate" class="section level3">
<h3><span class="header-section-number">5.3.1</span> Evaluate</h3>
<p>The <em>evaluate</em> verb evaluates an expression for <em>each</em> observation in the input cube. An expression is structured as follows:</p>
<p><span class="math display">\[
Expression = (Value, Math Operator, Value)
\]</span></p>
<p>In our case, the left hand value is an observation from the input cube to which the verb is applied. The right hand value can be a corresponding observation from another cube, a list of numbers, or even a single number. Since the expression is evaluated for each observation in the input cube, the output of the evaluate block is a new cube with the <em>same dimensions</em> as the input cube.</p>
<p>This is illustrated in the figure below. The blue cube on the left forms the left hand side of the expression, the red cube in the middle forms the right hand side of the expression. The cube on the right with mixed colors is the output of the evaluation. In this case, the blue and red cube have exactly the same dimensions, meaning that each observations in the blue cube has a corresponding observation in the red cube. Lets say we use the mathematical operator <code>+</code> as our operator. Then, the value of observation #1 - lets say that is the one on the bottom-left edge - in the output cube equals the value of observation #1 in the blue cube <em>added to</em> the value of observation #1 in the red cube. The same yields for all other observations.</p>
<center>
<p><img src="img/evaluate.png" style="width:100.0%" /></p>
</center>
<p>However, the cube on right hand side of the expression can have different dimensions than the one on the left hand side. For example, when our cube on the right hand side <em>only</em> has spatial dimensions, the right hand side values are <em>duplicated</em> for each timestamp in the left hand side cube. This also works the other way around. In jargon, this is called <a href="https://machinelearningmastery.com/broadcasting-with-numpy-arrays/">array broadcasting</a>.</p>
<center>
<p><img src="img/evaluate2.png" style="width:100.0%" /></p>
</center>
<p>The same principle applies when the right hand side is only a single value. Then, this value is <em>duplicated</em> for each observation in the left hand side cube.</p>
<center>
<p><img src="img/evaluate3.png" style="width:100.0%" /></p>
</center>
<p>Sen2Cube.at has several built-in operators that can be used to build expressions.</p>
<ul>
<li><strong>Comparison operators</strong>: operators that compare values and return either <code>True</code> or <code>False</code>. These are <code>=</code>, <code>in</code>, <code>&gt;</code>, <code>&lt;</code>, <code>≥</code> and <code>≤</code>.</li>
<li><strong>Logical operators</strong>: operators that combine boolean values (i.e. <code>True</code> and <code>False</code>). These are <code>and</code> and <code>or</code>.</li>
<li><strong>Algebraic operators</strong>: operators that combine numerical values. These are <code>+</code>, <code>-</code>, <code>*</code> and <code>\</code>.</li>
</ul>
<p>The functionality of each supported operator is illustrated with toy examples below.</p>
<div class="rmdnote">
<p>
The <strong>in</strong> operator is special, in the sense that each observation in the input cube is compared to a <strong>list</strong> of values, rather than to a single value. If the observed value is <em>in</em> the given list, the result will be <em>True</em>. If not, the result will be <em>False</em>. The same list of values is used for each observation in the input cube.
</p>
</div>
<div class="rmdcaution">
<p>
Be aware what type of data both sides of the expression contain. For example, the logical operators are only useful when both sides of the expression contain boolean values (i.e. <em>True</em> or <em>False</em>). The algebraic operators only make sense for numerical values, and not for categories. Et cetera.
</p>
</div>
<center>
<p><img src="img/eq.png" style="width:24.0%" /> <img src="img/in.png" style="width:24.0%" /> <img src="img/gt.png" style="width:24.0%" /> <img src="img/lt.png" style="width:24.0%" /></p>
<p><img src="img/ge.png" style="width:24.0%" /> <img src="img/le.png" style="width:24.0%" /> <img src="img/and.png" style="width:24.0%" /> <img src="img/or.png" style="width:24.0%" /></p>
<p><img src="img/add.png" style="width:24.0%" /> <img src="img/sub.png" style="width:24.0%" /> <img src="img/mul.png" style="width:24.0%" /> <img src="img/div.png" style="width:24.0%" /></p>
</center>
</div>
<div id="filter" class="section level3">
<h3><span class="header-section-number">5.3.2</span> Filter</h3>
<p>The <em>filter</em> verb should only be applied to cubes that contain boolean data values. It then keeps <em>only</em> those values that are <code>True</code>, and removes the values that are <code>False</code>. Technically, this is the same as masking (see <a href="blocks.html#mask">5.3.6</a>) a boolean cube by itself.</p>
<center>
<p><img src="img/filter.png" style="width:67.0%" /></p>
</center>
</div>
<div id="group-by-and-ungroup" class="section level3">
<h3><span class="header-section-number">5.3.3</span> Group by and ungroup</h3>
<div id="groupby" class="section level4">
<h4><span class="header-section-number">5.3.3.1</span> Group by</h4>
<p>The <em>group by</em> verb splits the input cube into distinct groups, based on a given grouping variable. All subsequent operations will the be applied to each group <em>separately</em>, until the <em>ungroup</em> verb is called. At that point, the groups will be combined back together into a single cube. This workflow is also known as <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/groupby.html">Split-Apply-Combine</a>. For example, the input cube can be split into groups such that each group contains <em>exclusively</em> observations from a specific year. Then, these observations can be reduced over time and over space. What is left is a single value for each year. These values can be combined together along a new time dimension, in which each time coordinate refers to a year.</p>
<center>
<p><img src="img/group.png" style="width:100.0%" /></p>
</center>
<p>The Sen2Cube.at interface offers several pre-defined grouping variables:</p>
<ul>
<li><strong>Temporal grouping variables</strong>: grouping variables that will split the temporal dimension, such that each group contains <em>exclusively</em> observations taken within a specific time period. The variables to choose from are <code>year</code>, <code>season</code>, <code>month</code>, <code>week</code>, <code>dayofyear</code> and <code>dayofweek</code>.</li>
<li><strong>Spatial grouping variables</strong>: grouping variables that will split the spatial dimensions, such that each group contains <em>exclusively</em> observations taken within a specific sub-area inside the defined area-of-interest. Currently, only a single variable is supported, named <code>spatialfeature</code>. This requires the area-of-interest to consist of multiple, distinct spatial features (point, lines or polygons) that do not intersect with each other. Each of these distinct features will then form a group.</li>
</ul>
<p>It is also possible to group based on <em>multiple</em> grouping variables. For example, when having two years of data with at least one observation each month, grouping by <code>month</code> will result in 12 different groups. Observations from January in the first year, will end up in the same group as observations from January in the second year. However, when grouping by <code>month</code> <em>and</em> <code>year</code>, there will be 24 different groups. Such multiple grouping operations are enabled in the block interface by means of a <em>group list</em> block.</p>
<p>Thirdly, you can also provide a defined custom partition (see <a href="#partition"><strong>??</strong></a>) of the time dimension as a grouping variable.</p>
<center>
<p><img src="img/group_single.png" style="width:32.0%" /> <img src="img/group_multi.png" style="width:32.0%" /> <img src="img/group_custom.png" style="width:32.0%" /></p>
</center>
<div class="rmdcaution">
<p>
Currently, the Sen2Cube.at interface does not support cubes that have <em>more than one</em> temporal dimension, or <em>more than two</em> spatial dimensions. When grouping with a temporal grouping variable, each group represents a specific time period like a year, season or month. When combined back together into a single cube during ungrouping, a <em>new</em> time dimension is created in which each time coordinate refers to one of those groups. Since multiple time dimensions are not allowed, the <em>original</em> time dimension <em>must</em> be reduced before ungrouping. The same yields for spatial grouping operations. The <em>original</em> spatial dimensions <em>must</em> be reduced before ungrouping.
</p>
</div>
</div>
<div id="ungroup" class="section level4">
<h4><span class="header-section-number">5.3.3.2</span> Ungroup</h4>
<p>After grouping, all subsequent operations will the be applied to each group <em>separately</em>, until the <em>ungroup</em> verb is called. At that point, the groups will be combined back together into a single cube.</p>
</div>
</div>
<div id="invert" class="section level3">
<h3><span class="header-section-number">5.3.4</span> Invert</h3>
<p>The <em>invert</em> verb should only be applied to cubes that contain boolean data values. It then replaces all <code>True</code> values by <code>False</code> values, and vice versa.</p>
<center>
<p><img src="img/invert.png" style="width:67.0%" /></p>
</center>
</div>
<div id="label" class="section level3">
<h3><span class="header-section-number">5.3.5</span> Label</h3>
<p>The <em>label</em> verb does not influence the data values in any way. It simply stores a label for the entire input cube. This is useful for example before concatenating (see <a href="blocks.html#concatenate">5.4.1</a>) several cubes over a new dimension. The label of each cube will then serve as coordinate value of the new dimension.</p>
</div>
<div id="mask" class="section level3">
<h3><span class="header-section-number">5.3.6</span> Mask</h3>
<p>The <em>mask</em> verb applies a boolean value mask to the input cube. A boolean value mask is a cube with boolean data values (i.e. <code>True</code> and <code>False</code>). When an observation in the input cube corresponds to a <code>True</code> value in the mask, the observation is kept. However, when an observation in the input cube corresponds to a <code>False</code> value in the mask, the observation is removed.</p>
<center>
<p><img src="img/mask.png" style="width:100.0%" /></p>
</center>
<p>Similar to the <em>evaluate</em> verb, the boolean mask in a masking operation can have different dimensions than the input cube. For example, when the mask only has spatial dimensions, its values will be <em>duplicated</em> for each timestamp in the input cube. When the mask only has a temporal dimension, its values will be <em>duplicated</em> for each spatial location in the input cube.</p>
<center>
<p><img src="img/mask_space.png" style="width:100.0%" /></p>
</center>
<center>
<p><img src="img/mask_time.png" style="width:100.0%" /></p>
</center>
</div>
<div id="reduce" class="section level3">
<h3><span class="header-section-number">5.3.7</span> Reduce</h3>
<p>The <em>reduce</em> verb applies a reduction function over a certain dimension or set of dimensions. That means that for each unique combination of coordinate values of all other dimension in the input cube, the values of the dimension(s) to be reduced over are summarized to a single value, based on some function. For example, assume a input cube with one temporal and two spatial dimensions. Basically, this means that for a each location in space, we have multiple observations, each made at a different moment in time. When we reduce this cube over the time dimension, using <em>mean</em> as reduction function, we reduce our observed values to only <em>a single</em> value per spatial location, equal to the <em>average</em> of all observed values at that location. This removes the time dimension, leaving us with a cube that only has spatial dimensions.</p>
<center>
<p><img src="img/reduce_time.png" style="width:67.0%" /></p>
</center>
<p>Similarly, we can also reduce the spatial dimensions instead, ending up with a single value per timestamp. The Sen2Cube.at interface only supports reduction of the two spatial dimensions at once, and <em>not</em> of either the X or Y dimension separately.</p>
<center>
<p><img src="img/reduce_space.png" style="width:67.0%" /></p>
</center>
<p>Sen2Cube.at has several built-in reduction functions that can be used.</p>
<div class="rmdcaution">
<p>
Be aware what type of data and what dimensions both the input cube contains. Some reduction functions are only useful when applied to boolean values (i.e. <em>True</em> and <em>False</em>). Others, for example calculation of the mean or the sum, make sense for numerical data, but not for categorical or boolean data. Et cetera. Also, some reduction functions are only meant to be applied to the time dimension, while others are only meant to be applied to the spatial dimensions.
</p>
</div>
<center>
<p><img src="img/count.png" style="width:32.0%" /> <img src="img/percentage.png" style="width:32.0%" /> <img src="img/occurence.png" style="width:32.0%" /></p>
<p><img src="img/all.png" style="width:32.0%" /> <img src="img/any.png" style="width:32.0%" /> <img src="img/first.png" style="width:32.0%" /></p>
<p><img src="img/last.png" style="width:32.0%" /> <img src="img/min.png" style="width:32.0%" /> <img src="img/max.png" style="width:32.0%" /></p>
<p><img src="img/mean.png" style="width:32.0%" /> <img src="img/median.png" style="width:32.0%" /> <img src="img/mode.png" style="width:32.0%" /></p>
<p><img src="img/sum.png" style="width:32.0%" /> <img src="img/product.png" style="width:32.0%" /></p>
</center>
<p>Two special reduction functions are <code>area</code> and <code>duration</code>. The first is meant to be applied to the <em>spatial dimensions</em>, and equals the count over space multiplied by the area of a single pixel in square meters. The latter is meant to be applied to the <em>temporal dimension</em>, and equals the count over time, after resampling the observations to day-level. That is, when there are two observations on the same day, they will be counted as <em>one</em>.</p>
<center>
<p><img src="img/area.png" style="width:32.0%" /> <img src="img/duration.png" style="width:32.0%" /></p>
</center>
</div>
<div id="replace" class="section level3">
<h3><span class="header-section-number">5.3.8</span> Replace</h3>
<p>The <em>replace</em> verb replaces the values of the <em>valid</em> observations of the input cube (so <em>not</em> the missing values!) by the values of the corresponding observations in another cube.</p>
<center>
<p><img src="img/replace.png" style="width:100.0%" /></p>
</center>
</div>
<div id="select" class="section level3">
<h3><span class="header-section-number">5.3.9</span> Select</h3>
<p>The <em>select</em> verb selects a subset of the coordinates of a certain dimension, and keeps only the observations in the input cube that align to those coordinate values. Currently, only subsetting the temporal dimension is possible. To do so, you can use one or more of the time value blocks (see <a href="blocks.html#time">5.5</a>), which represent either a <em>time instant</em>, <em>time collection</em> or <em>time period</em>. For example, a select operation could be to only keep those observations that were made within the time period between March 2020 and June 2020.</p>
<center>
<p><img src="img/select.png" style="width:67.0%" /></p>
</center>
<div class="rmdnote">
<p>
Selection is similar to masking, in the sense that they both take a subset of the data. During masking, the subset is defined by another cube containing boolean values. During selection, however, the subset is defined by addressing coordinate values directly.
</p>
</div>
</div>
</div>
<div id="combiners" class="section level2">
<h2><span class="header-section-number">5.4</span> Combiners</h2>
<p>Verbs are applied to a single input cube, such as a stored entity or result definition, or some retrieved source data. However, it is also possible to first combine several cubes together into a single one, and apply verbs to that combined cube. The <em>combiner</em> blocks that facilitate this are described below.</p>
<div id="concatenate" class="section level3">
<h3><span class="header-section-number">5.4.1</span> Concatenate</h3>
<p>The <em>concatenate</em> combiner combines multiple input cubes along an existing or a new dimension into a single, larger cube. When combining along an existing dimension, this dimension must be present in all input cubes, and all input cubes need to have <em>different</em> coordinate values for that dimension. For example, input cube A has a time dimension with 01-01-2020 and 02-01-2020 as coordinate values. Input cube B has a time dimension with 03-01-2020 as coordinate values. Concatenating the two along the time dimension, results in a single cube with a time dimension of length 3, containing 01-01-20, 02-01-2020 <em>and</em> 03-01-2020 as coordinate values.</p>
<center>
<p><img src="img/concatenate_exs.png" style="width:100.0%" /></p>
</center>
<p>Concatenating along a new dimension will create an output cube with a new dimension, for which observations coming from input <em>cube A</em> will have a coordinate value <em>A</em>, observations coming from input <em>cube B</em> a coordinate value <em>B</em>, etc. What we refer to as <em>A</em> and <em>B</em> will, in practice, be the label (see <a href="blocks.html#label">5.3.5</a>) associated with the input cube.</p>
<center>
<p><img src="img/concatenate_new.png" style="width:100.0%" /></p>
</center>
<div class="rmdcaution">
<p>
Except the dimension to be concatenated over, all cubes provided to the concatenate combiner are expected to have <em>matching shapes</em>.
</p>
</div>
</div>
<div id="compose" class="section level3">
<h3><span class="header-section-number">5.4.2</span> Compose</h3>
<p>The <em>compose</em> combines multiple cubes with <em>boolean</em> data values, into a single cube with <em>categorical</em> data values. It requires the input cubes to be <em>distinct</em>. With that we mean, when an observation in input cube A is <code>True</code>, the corresponding observations (i.e. having the same coordinates) in the other input cubes can <em>not</em> be <code>True</code>. Then, the output cube will assign category value 1 to all True-observations of input cube A, category value 2 to all True-observations of input cube B, et cetera.</p>
<center>
<p><img src="img/compose.png" style="width:100.0%" /></p>
</center>
</div>
<div id="combine" class="section level3">
<h3><span class="header-section-number">5.4.3</span> Merge</h3>
<p>The <em>merge</em> combiner works the same as the <em>evaluate</em> verb (see <a href="blocks.html#evaluate">5.3.1</a>), but allows for an expression with more than two variables. For example, <em>cube A + cube B + … + cube n</em>. It offers only the logical and algebraic operators. The output cube will always have the same dimensions as the <em>first</em> input cube.</p>
</div>
</div>
<div id="time" class="section level2">
<h2><span class="header-section-number">5.5</span> Time</h2>
<p>Time value blocks refer to the temporal dimension of the query. They allow to subuset cubes by time, customly define seasons, et cetera. There are three different time value blocks.</p>
<div id="time_instant" class="section level3">
<h3><span class="header-section-number">5.5.1</span> Time instant</h3>
<p>A <em>time instant</em> is a specific moment in time. It can be modelled with three components: the <em>year</em>, the <em>month</em> and the <em>day</em>. That is, a fully specified time instant can be 2020-07-23. However, not all components need to be specified. One can also leave out the year, and create the time instant XXXX-07-23, which will refer to <em>all</em> 23rd of July dates in the overall time interval of the query. Similarly, 2020-07-XX will refer to all days in July 2020, and XXXX-07-XX to all days in July, for all years in the time interval.</p>
</div>
<div id="time_period" class="section level3">
<h3><span class="header-section-number">5.5.2</span> Time periods</h3>
<p>A <em>time period</em> is a consecutive period of time, defined with a <em>from</em> time instant and a <em>to</em> time instant. The interval is closed at both sides, so both the from and to time instants are included in the time period. It is also possible to use not fully specified time instants. For example, the time period from XXXX-05-XX to XXXX-08-XX is the time period from May to August, no matter the year. Thus, when subsetting the time dimension of a cube with this time period, all timestamps that are in either May, June, July or August will be selected, for each year in the overall time interval.</p>
<div class="rmdwarning">
<p>
In a time period, the <em>from</em> time instant should always preceed the <em>to</em> time instant. Currently, that means it is not possible to create time periods like [from XXXX-11-XX to XXXX-01-XX], meaning from November to January. If you want to model such a period of time, you can use a time collection instead
</p>
</div>
</div>
<div id="time_collection" class="section level3">
<h3><span class="header-section-number">5.5.3</span> Time collection</h3>
<p>A <em>time collection</em> is a list of time instants that do <em>not</em> have to be consecutive. For example, the time collection [XXXX-05-XX, XXXX-08-XX] refers to all timestamps in May and August.</p>
</div>
</div>
<div id="space" class="section level2">
<h2><span class="header-section-number">5.6</span> Space</h2>
<div class="rmdwarning">
<p>
Currently there is <em>no</em> support for spatial subsetting of cubes, or customly defining areas that divide the overall area-of-interest. Such functionalities might be added in the future.
</p>
</div>
</div>
<div id="comment" class="section level2">
<h2><span class="header-section-number">5.7</span> Comments</h2>
<p>The comment block allows you to add comments to parts of your model, such that both your future self and others can better understand what is happening. Comment blocks can be added anywhere in the model, and will be ignored during evaluation.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="model.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="examples.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/whisperingpixel/iq-manual/edit/master/building_blocks.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
